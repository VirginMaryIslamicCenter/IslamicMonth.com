<div class="dialog-backdrop" (click)="closeDialog()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h2 class="dialog-title">Set Your Location</h2>
      <button class="dialog-close" (click)="closeDialog()" aria-label="Close">‚úï</button>
    </div>

    <div class="dialog-body">
      <!-- Browser Location Button -->
      <button
        class="browser-location-btn"
        (click)="getBrowserLocation()"
        [disabled]="gettingBrowser()"
      >
        <span class="btn-icon">üìç</span>
        <span class="btn-text">{{
          gettingBrowser() ? 'Getting location...' : 'Use my current location'
        }}</span>
      </button>

      <div class="divider">
        <span class="divider-text">or</span>
      </div>

      <!-- Search Form -->
      <form class="search-form" (ngSubmit)="searchLocation()">
        <label class="search-label">Enter a location</label>
        <div class="search-input-wrapper">
          <div class="autocomplete-container">
            <input
              type="text"
              class="search-input"
              placeholder="City, state, country‚Ä¶"
              [(ngModel)]="locationQuery"
              (input)="onInputChange()"
              name="locationQuery"
              [disabled]="searching()"
              autocomplete="off"
            />
            @if (showSuggestions() && suggestions().length > 0) {
              <div class="suggestions-dropdown">
                @for (suggestion of suggestions(); track suggestion.place_id) {
                  <button
                    type="button"
                    class="suggestion-item"
                    (click)="selectSuggestion(suggestion)"
                  >
                    <span class="suggestion-icon">üìç</span>
                    <span class="suggestion-text">{{ getDisplayName(suggestion) }}</span>
                  </button>
                }
              </div>
            }
          </div>
          <button
            type="submit"
            class="search-btn"
            [disabled]="searching() || !locationQuery.trim()"
          >
            {{ searching() ? '‚Ä¶' : 'Search' }}
          </button>
        </div>
      </form>

      @if (locationError()) {
        <div class="error-message">{{ locationError() }}</div>
      }
    </div>
  </div>
</div>
